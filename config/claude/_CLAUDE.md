# CLAUDE.md

- 回答は常に日本語・敬語で行うこと

## 方法論

- **根拠の明示**: 調査結果や主張を述べる際は、必ず根拠 (出典 URL、ファイルパス、公式ドキュメントの引用など) を明示すること。特に「〜されていない」「〜が推奨」などの評価的な主張には必ず出典を付けること
- 最新のライブラリやフレームワーク情報については、context7 MCP サーバーを使用して最新のドキュメントを参照すること
- Web 検索、並列 Web 検索（非常に有用）、および並列エージェント実行を活用し、最新情報を調査・理解するためのリマインダーやステップを追加することに重点を置くこと
- **専門サブエージェントの必須使用**: その専門知識に合致するタスクについては、**必ず常に**適切なサブエージェントと共に Task ツールを使用すること。タスクが些細なもの（単一ファイルの読み取り/編集）でない限り、サブエージェントの使用をデフォルトとすること。独立したタスクについては、複数のエージェントを並列で起動すること
- サブエージェントを使った並列実行によって生産性を最大化すること:
    - 独立した調査/分析タスクについては、複数の Task サブエージェントを同時に起動すること
    - 複雑なタスクを、並列実行可能な原子的で自己完結したユニットに分解すること
    - 同時実行のため、単一メッセージ内でツール呼び出し（複数ファイル読み取り、検索など）をバッチ処理すること
    - 各並列タスクが自律的に動作するための十分なコンテキストを持つようにすること
    - 最適な並列化のために MECE（相互排他的で網羅的）なタスク分解を使用すること

## リポジトリアクセス

- GitHub リポジトリは `~/ghq` ディレクトリ内で調査・分析用に利用可能
- ユーザーのリポジトリ: `~/ghq/github.com/fohte/<repo-name>` に配置
- 外部リポジトリ: 分析用に利用可能にするには `ghq get <org>/<repo-name>` を使用してクローン

## ワークフロー

- **Skill の優先使用**: タスクに合致する Skill が `available_skills` にある場合は、**必ず最初に** Skill ツールを呼び出すこと。直接 Bash コマンドを実行してはならない
    - コミット時: `commit` Skill を使用すること (Why/What を必ず記述する)
    - PR 作成時: `create-pr` Skill を使用すること (`gh pr create` を直接実行しない)
    - GitHub Issue の閲覧・編集時: `github-issue` Skill を使用すること
    - PR レビューコメントの確認・対応時: `check-pr-review` Skill を使用すること
    - 別の Claude Code インスタンスにタスクを委任する時: `delegate-claude` Skill を使用すること
    - Renovate 設定のデバッグ・検証時: `debug-renovate` Skill を使用すること
    - JavaScript/TypeScript プロジェクトでパッケージマネージャー操作時: `ni` Skill を使用すること (`npm`, `yarn`, `pnpm`, `bun` を直接使用しない)
    - 調査専用タスク時: `research` Skill を使用すること (ファイル変更なしで調査のみ実行)
    - 設計専用タスク時: `design` Skill を使用すること (ファイル変更なしで設計案のみ作成)
- GitHub アクセス: すべての GitHub 操作には `gh` コマンドを使用すること（`gh api` サブコマンドは避けること）。これには GitHub URL の処理も含まれる。他のリポジトリにアクセスする際は `-R` オプションを使用すること（目的: `gh` コマンドは安全な自動実行のため事前承認済み）
- HTTP リクエスト: `curl` や `gh api` を使用する際は、`-X GET` のように HTTP メソッドを明示的に指定すること（目的: `-X GET` は自動許可されているため）
- ファイル削除: 追跡されているファイルを削除する際は、削除を適切にステージングするため `rm` ではなく `git rm` を使用すること
- 一時ファイル: 一時ファイルには `.z/` ディレクトリを使用すること（git で無視される）

## コードスタイル

- コメント
    - リポジトリが public であれば英語で、そうでなければ日本語で書く
    - 「何を」ではなく「なぜ」を説明すること
- ファイル: 「No newline at end of file」警告を避けるため、常に改行文字で終わらなければならない

## ライティング

- **全角記号の使用禁止**: 日本語の回答・文章において、以下の記号は**絶対に全角を使用してはならない**。必ず半角を使うこと:
    - 丸括弧: `()` を使う (「（）」は禁止)
    - 感嘆符・疑問符: `!` `?` を使う (「！」「？」は禁止)
    - コロン: `:` を使う (「：」は禁止)
- 半角英数字と全角文字の間には半角スペースを入れること
- 英語で技術文書を書くときは以下を守ること
    - 「Want to...」「Need to...」で文を始めない。代わりに動詞の命令形 ("Enable...", "Add...") や受動態 ("Automatic restoration is enabled...") を使うこと
- AA（アスキーアート）やボックス装飾 (`┌─┐`, `└─┘`, `│` など) は使用しないこと。代わりにプレーンテキスト、Markdown のリスト、コードブロック、テーブルを使うこと
