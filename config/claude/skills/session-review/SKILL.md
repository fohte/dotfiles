---
name: session-review
description: Analyze a Claude Code session to extract actionable insights for CLAUDE.md and skills improvement. Accepts optional session ID argument.
---

# Session Review

過去の Claude Code セッションを分析し、CLAUDE.md やスキルの改善提案を行う。

## 使い方

- `/session-review` - 現在のプロジェクトの直近セッションを分析
- `/session-review <session-id>` - 指定セッションを分析 (プレフィックス一致可、プロジェクト横断検索)

## 手順

### 1. セッションの取得

`claude-session-digest` コマンドでセッションのダイジェストを取得する。

**引数なしの場合**: `claude-session-digest --list` で直近のセッション一覧を表示し、最新のものを選択する。

**引数ありの場合**: 指定されたセッション ID で取得する。

```bash
claude-session-digest <session-id>
```

出力が大きい場合 (10 万文字超) は、`-t 200` で truncate を短くして再取得する。

### 2. ダイジェストの分析

取得したダイジェストを読み、以下の観点で分析する。

#### A. ワークフロー・パターンの分析

- ユーザーがどのような指示を出しているか
- どのツールがよく使われているか
- 繰り返し行われている操作パターンがあるか
- 非効率な操作や手戻りが発生していないか

#### B. CLAUDE.md への反映候補

以下に該当するものを抽出する:

- **繰り返し指摘されるスタイルや規約** (例: 「コメントは英語で」「全角記号は使うな」)
- **プロジェクト固有のルール** (例: 特定のコマンドの使い方、ファイル配置のルール)
- **Claude が間違えやすいポイント** (例: ツールの使い方の誤り、不要な操作)
- **ユーザーの好み** (例: 出力形式、言語、詳細度)

#### C. スキル化の候補

以下に該当するものを抽出する:

- **複数ステップの定型ワークフロー** が繰り返されている
- **特定のコマンド群をまとめて実行** するパターンがある
- **毎回同じような指示** をユーザーが出している
- 既存スキルの **改善点** (手順の追加・修正、ガイドラインの強化)

#### D. 問題点の特定

- Claude が誤った操作をしたケース
- ユーザーが修正指示を出したケース
- 無駄な試行錯誤が発生したケース
- コンテキスト不足で非効率になったケース

### 3. レポートの出力

以下の形式で報告する。

```markdown
## セッション概要

- **セッション ID**: ...
- **要約**: (summary があればそれを使用)
- **主な作業内容**: 1-2 文で要約

## インサイト

### CLAUDE.md への追加・修正提案

1. **[提案内容]**
    - 根拠: セッション内のどの部分から得たか
    - 推奨する記述例

### スキルの改善・新規作成提案

1. **[提案内容]**
    - 根拠: セッション内のどの部分から得たか
    - 既存スキルの改善の場合: 対象スキル名と変更点
    - 新規スキルの場合: 想定される使い方と主要ステップ

### その他の改善点

- (非効率なパターン、再発防止策など)
```

## 注意事項

- **読み取り専用**: このスキルはファイルの作成・編集を行わない。提案のみ行う
- **具体的に**: 「改善すべき」ではなく、具体的な記述例や変更内容を示す
- **根拠を明示**: 各提案にはセッション内のどの部分が根拠かを示す
- 提案の適用はユーザーの判断に委ねる
